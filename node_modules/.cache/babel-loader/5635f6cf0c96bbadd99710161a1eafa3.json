{"ast":null,"code":"var _jsxFileName = \"/Users/marijastojanovic/Desktop/School Projects/Joe Mod 4/mod4Project_frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport NavBar from './components/NavBar';\nimport CoffeeList from './containers/CoffeeList';\nimport CoffeeCard from \"./components/CoffeeCard\";\nimport LoginForm from \"./components/LoginForm\";\nimport UserProfile from \"./components/UserProfile\";\nimport TitleBar from \"./components/TitleBar\";\nimport SortControl from \"./components/SortControl\";\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport './App.css';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      coffeeShops: [],\n      displayedShops: [],\n      selectedShop: null,\n      currentUser: null,\n      loggingIn: false,\n      onProfilePage: false,\n      favorites: [],\n      searchText: \"\",\n      sort: \"price\"\n    };\n\n    this.loginClick = () => {\n      this.setState({\n        loggingIn: true\n      });\n    };\n\n    this.addToFavorites = shop => {\n      debugger;\n\n      if (this.state.currentUser === null) {\n        alert(\"please login\");\n      } else if (this.state.favorites.includes(shop)) {\n        alert(\"You already added this shop to your favorites\");\n      } else {\n        let newShop = [...this.state.favorites, shop];\n        this.setState({\n          favorites: newShop\n        });\n      }\n    };\n\n    this.removeFromFavorites = shop => {\n      if (!this.state.favorites.includes(shop)) {\n        alert(\"This shop is not in your favorites\");\n      } else {\n        let newArray = this.state.favorites.filter(s => s !== shop);\n        this.setState({\n          favorites: newArray\n        });\n      }\n    };\n\n    this.loginSubmit = user => {\n      let username = user.name;\n      this.setState({\n        loggingIn: false,\n        currentUser: username\n      });\n    };\n\n    this.onSearch = event => {\n      this.setState({\n        searchText: event.target.value\n      });\n    };\n\n    this.handleSort = value => {\n      value === \"Price\" ? this.setState({\n        sort: \"price\"\n      }) : this.setState({\n        sort: \"rating\"\n      });\n    };\n\n    this.resetList = () => {\n      let allShops = this.state.coffeeShops;\n      this.setState({\n        selectedShop: null,\n        displayedShops: allShops,\n        searchText: \"\"\n      });\n    };\n\n    this.selectShop = shop => {\n      this.setState({\n        selectedShop: shop\n      });\n    };\n\n    this.goToProfile = () => {\n      let favorites = this.state.favorites;\n      this.state.currentUser ? this.setState({\n        displayedShops: favorites,\n        onProfilePage: true\n      }) : alert(\"please login\");\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:4000/coffee_shops\").then(r => r.json()).then(coffeeList => this.setState({\n      coffeeShops: coffeeList\n    }));\n  }\n\n  getSorted() {\n    let value = this.state.sort;\n    return value === \"price\" ? this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? 1 : -1) : this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? -1 : 1);\n  }\n\n  render() {\n    let sortedShops = this.getSorted(this.state.sort);\n    let searchedShops = sortedShops.filter(s => s.name.toLowerCase().includes(this.state.searchText.toLowerCase()));\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(TitleBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), this.state.currentUser && this.state.displayedShops.length > 0 ? React.createElement(NavBar, {\n      user: this.state.currentUser,\n      loginClick: this.loginClick,\n      onSearch: this.onSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }) : null, this.state.currentUser && this.state.displayedShops.length > 0 ? React.createElement(SortControl, {\n      sort: this.state.sort,\n      getSorted: this.getSorted,\n      handleSort: this.handleSort,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }) : null, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/coffeeshops/:id\",\n      render: props => {\n        let id = parseInt(props.match.params.id);\n        let selectedShop = this.state.coffeeShops.find(s => s.id === id);\n        return React.createElement(CoffeeCard, {\n          shop: selectedShop,\n          addToFavorites: this.addToFavorites,\n          favorites: this.state.favorites,\n          goBack: this.resetList,\n          removeFromFavorites: this.removeFromFavorites,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/coffeeshops\",\n      render: () => React.createElement(CoffeeList, {\n        coffee_shops: searchedShops,\n        selectShop: this.selectShop,\n        goToProfile: this.goToProfile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      render: () => {\n        return this.state.currentUser ? React.createElement(UserProfile, {\n          user: this.state.currentUser,\n          display: searchedShops,\n          goBack: this.resetList,\n          selectShop: this.selectShop,\n          getSorted: this.getSorted,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }) : React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: () => {\n        return this.state.currentUser ? React.createElement(Redirect, {\n          to: \"/profile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }) : React.createElement(LoginForm, {\n          loginSubmit: this.loginSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/marijastojanovic/Desktop/School Projects/Joe Mod 4/mod4Project_frontend/src/App.js"],"names":["React","Component","NavBar","CoffeeList","CoffeeCard","LoginForm","UserProfile","TitleBar","SortControl","Route","Switch","Redirect","App","state","coffeeShops","displayedShops","selectedShop","currentUser","loggingIn","onProfilePage","favorites","searchText","sort","loginClick","setState","addToFavorites","shop","alert","includes","newShop","removeFromFavorites","newArray","filter","s","loginSubmit","user","username","name","onSearch","event","target","value","handleSort","resetList","allShops","selectShop","goToProfile","componentDidMount","fetch","then","r","json","coffeeList","getSorted","shop1","shop2","render","sortedShops","searchedShops","toLowerCase","length","props","id","parseInt","match","params","find"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport NavBar from './components/NavBar'\nimport CoffeeList from './containers/CoffeeList'\nimport CoffeeCard from \"./components/CoffeeCard\"\nimport LoginForm from \"./components/LoginForm\"\nimport UserProfile from \"./components/UserProfile\"\nimport TitleBar from \"./components/TitleBar\"\nimport SortControl from \"./components/SortControl\"\nimport {Route, Switch, Redirect} from 'react-router-dom'\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    coffeeShops: [],\n    displayedShops: [],\n    selectedShop: null,\n    currentUser: null,\n    loggingIn: false,\n    onProfilePage: false,\n    favorites: [],\n    searchText: \"\",\n    sort: \"price\"\n  }\n  \n  componentDidMount(){\n    fetch(\"http://localhost:4000/coffee_shops\")\n    .then(r=>r.json())\n    .then(coffeeList=>\n      this.setState({\n        coffeeShops: coffeeList})\n      )\n    }\n    \n  loginClick = () =>{\n    this.setState({loggingIn: true})\n  }\n\n  addToFavorites =(shop)=>{\n    debugger\n    if(this.state.currentUser === null){\n      alert(\"please login\")\n    }\n    else if(this.state.favorites.includes(shop)){\n      alert(\"You already added this shop to your favorites\")\n    }else{\n      let newShop = [...this.state.favorites, shop]\n      this.setState({favorites : newShop})\n    }\n  }\n\n  removeFromFavorites =(shop)=>{\n    if(!this.state.favorites.includes(shop)){\n      alert(\"This shop is not in your favorites\")\n    }else{\n    let newArray = this.state.favorites.filter(s=> s !== shop)\n    this.setState({favorites : newArray})}\n  }\n\n  \n  loginSubmit = (user) =>{\n    let username = user.name\n    this.setState({\n      loggingIn: false,\n      currentUser: username\n    })\n  }\n\n  onSearch = (event) => {\n    this.setState({searchText: event.target.value})\n    \n  }\n\nhandleSort = (value) => {\n    value === \"Price\"\n    ?\n    this.setState({sort: \"price\"})\n    :\n    this.setState({sort: \"rating\"})\n  }\n  getSorted(){\n    \n    let value = this.state.sort\n    return(\n    value === \"price\"\n    ?\n    (this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? 1 : -1))\n    :\n    (this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? -1 : 1)))\n  }\n  \n  resetList = () =>{\n    let allShops = this.state.coffeeShops\n    this.setState({\n      selectedShop: null,\n      displayedShops: allShops,\n      searchText: \"\"\n      })\n  }\n  selectShop = (shop) =>{\n    this.setState({selectedShop: shop})\n  }\n\n  goToProfile = () =>{\n    \n    let favorites = this.state.favorites\n    this.state.currentUser\n    ?\n    this.setState({\n      displayedShops: favorites,\n      onProfilePage: true})\n    :\n    alert(\"please login\")\n  }\n\n  render(){\n\n    let sortedShops = this.getSorted(this.state.sort)\n    let searchedShops = sortedShops.filter(s => s.name.toLowerCase().includes(this.state.searchText.toLowerCase()))\n  return (\n    <div className=\"App\">\n      <TitleBar  />\n   \n    {this.state.currentUser && this.state.displayedShops.length > 0 ? <NavBar user={this.state.currentUser} loginClick={this.loginClick} onSearch={this.onSearch}/>: null}\n    {this.state.currentUser && this.state.displayedShops.length > 0  ? <SortControl sort={this.state.sort} getSorted={this.getSorted} handleSort={this.handleSort}/>: null}<br/>\n            \n     <Switch>\n            <Route path=\"/coffeeshops/:id\" render={(props) => {\n              let id = parseInt(props.match.params.id)\n              let selectedShop = this.state.coffeeShops.find(s=>s.id === id)\n              return <CoffeeCard\n              shop={selectedShop} addToFavorites={this.addToFavorites} favorites={this.state.favorites} goBack={this.resetList} removeFromFavorites={this.removeFromFavorites}/>\n            }} />\n            <Route exact path=\"/coffeeshops\" render={()=>\n              <CoffeeList coffee_shops={searchedShops} selectShop={this.selectShop} goToProfile={this.goToProfile}/>\n            }/>\n            <Route exact path=\"/\" render={() => <Redirect to=\"/login\" />} />\n            <Route exact path=\"/profile\" render={() => {\n              return this.state.currentUser ? <UserProfile user={this.state.currentUser} display = {searchedShops} goBack={this.resetList} selectShop={this.selectShop} getSorted={this.getSorted}/> :\n                <Redirect to=\"/login\"/>\n            }} />\n            <Route exact path=\"/login\" render={() => {\n              return this.state.currentUser ? <Redirect to=\"/profile\"/> : <LoginForm\n                loginSubmit={this.loginSubmit}\n              />\n            }} />\n          </Switch>\n\n    \n    </div>\n  \n  )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}