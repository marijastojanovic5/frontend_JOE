{"ast":null,"code":"var _jsxFileName = \"/Users/marijastojanovic/Desktop/School Projects/Joe Mod 4/mod4Project_frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport NavBar from './components/NavBar';\nimport CoffeeList from './containers/CoffeeList';\nimport CoffeeCard from \"./components/CoffeeCard\";\nimport LoginForm from \"./components/LoginForm\";\nimport UserProfile from \"./components/UserProfile\";\nimport TitleBar from \"./components/TitleBar\";\nimport SortControl from \"./components/SortControl\";\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport './App.css';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      coffeeShops: [],\n      displayedShops: [],\n      selectedShop: null,\n      currentUser: null,\n      loggingIn: false,\n      onProfilePage: false,\n      favorites: [],\n      searchText: \"\",\n      sort: \"price\"\n    };\n\n    this.addToFavorites = coffeeShop => {\n      debugger;\n      let userObject = this.state.currentUser;\n      fetch(`http://localhost:4000/favorites`, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user_id: userObject.id,\n          coffee_shop_id: coffeeShop.id\n        })\n      }).then(r => r.json()).catch(error => console.error('Error:', error)).then(r => console.log(r));\n      alert(\"Added to favorites\"); // if(this.state.currentUser === null){\n      //   alert(\"please login\")\n      // }\n      // else if(this.state.favorites.includes(shop)){\n      //   alert(\"You already added this shop to your favorites\")\n      // }else{\n      //   let newShop = [...this.state.favorites, shop]\n      //   this.setState({favorites : newShop})\n      // }\n    };\n\n    this.removeFromFavorites = shop => {\n      if (!this.state.favorites.includes(shop)) {\n        alert(\"This shop is not in your favorites\");\n      } else {\n        let newArray = this.state.favorites.filter(s => s !== shop);\n        this.setState({\n          favorites: newArray\n        });\n      }\n    };\n\n    this.loginSubmit = user => {\n      this.setState({\n        loggingIn: true,\n        currentUser: user.user\n      });\n    };\n\n    this.onSearch = event => {\n      this.setState({\n        searchText: event.target.value\n      });\n    };\n\n    this.handleSort = value => {\n      value === \"Price\" ? this.setState({\n        sort: \"price\"\n      }) : this.setState({\n        sort: \"rating\"\n      });\n    };\n\n    this.resetList = () => {\n      let allShops = this.state.coffeeShops;\n      this.setState({\n        selectedShop: null,\n        displayedShops: allShops,\n        searchText: \"\"\n      });\n    };\n\n    this.selectShop = shop => {\n      this.setState({\n        selectedShop: shop\n      });\n    };\n\n    this.goToProfile = () => {\n      let favorites = this.state.favorites;\n      this.state.currentUser ? this.setState({\n        displayedShops: favorites,\n        onProfilePage: true\n      }) : alert(\"please login\");\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:4000/coffee_shops\").then(r => r.json()).then(coffeeList => this.setState({\n      coffeeShops: coffeeList\n    }));\n  }\n\n  getSorted() {\n    let value = this.state.sort;\n    return value === \"price\" ? this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? 1 : -1) : this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? -1 : 1);\n  }\n\n  render() {\n    let sortedShops = this.getSorted(this.state.sort);\n    let searchedShops = sortedShops.filter(s => s.name.toLowerCase().includes(this.state.searchText.toLowerCase()));\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(TitleBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), this.state.currentUser && this.state.displayedShops.length > 0 ? React.createElement(NavBar, {\n      user: this.state.currentUser,\n      loginClick: this.loginClick,\n      onSearch: this.onSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }) : null, this.state.currentUser && this.state.displayedShops.length > 0 ? React.createElement(SortControl, {\n      sort: this.state.sort,\n      getSorted: this.getSorted,\n      handleSort: this.handleSort,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }) : null, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/coffeeshops/:id\",\n      render: props => {\n        let id = parseInt(props.match.params.id);\n        let selectedShop = this.state.coffeeShops.find(s => s.id === id);\n        return React.createElement(CoffeeCard, {\n          shop: selectedShop,\n          addToFavorites: this.addToFavorites,\n          favorites: this.state.favorites,\n          goBack: this.resetList,\n          removeFromFavorites: this.removeFromFavorites,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/coffeeshops\",\n      render: () => React.createElement(CoffeeList, {\n        coffee_shops: searchedShops,\n        selectShop: this.selectShop,\n        goToProfile: this.goToProfile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      render: () => {\n        return this.state.currentUser ? React.createElement(UserProfile, {\n          user: this.state.currentUser,\n          display: searchedShops,\n          goBack: this.resetList,\n          selectShop: this.selectShop,\n          getSorted: this.getSorted,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }) : React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: () => {\n        return this.state.currentUser ? React.createElement(Redirect, {\n          to: \"/profile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }) : React.createElement(LoginForm, {\n          loginSubmit: this.loginSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/marijastojanovic/Desktop/School Projects/Joe Mod 4/mod4Project_frontend/src/App.js"],"names":["React","Component","NavBar","CoffeeList","CoffeeCard","LoginForm","UserProfile","TitleBar","SortControl","Route","Switch","Redirect","App","state","coffeeShops","displayedShops","selectedShop","currentUser","loggingIn","onProfilePage","favorites","searchText","sort","addToFavorites","coffeeShop","userObject","fetch","method","headers","body","JSON","stringify","user_id","id","coffee_shop_id","then","r","json","catch","error","console","log","alert","removeFromFavorites","shop","includes","newArray","filter","s","setState","loginSubmit","user","onSearch","event","target","value","handleSort","resetList","allShops","selectShop","goToProfile","componentDidMount","coffeeList","getSorted","shop1","shop2","render","sortedShops","searchedShops","name","toLowerCase","length","loginClick","props","parseInt","match","params","find"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport NavBar from './components/NavBar'\nimport CoffeeList from './containers/CoffeeList'\nimport CoffeeCard from \"./components/CoffeeCard\"\nimport LoginForm from \"./components/LoginForm\"\nimport UserProfile from \"./components/UserProfile\"\nimport TitleBar from \"./components/TitleBar\"\nimport SortControl from \"./components/SortControl\"\nimport {Route, Switch, Redirect} from 'react-router-dom'\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    coffeeShops: [],\n    displayedShops: [],\n    selectedShop: null,\n    currentUser: null,\n    loggingIn: false,\n    onProfilePage: false,\n    favorites: [],\n    searchText: \"\",\n    sort: \"price\"\n  }\n  \n  componentDidMount(){\n    fetch(\"http://localhost:4000/coffee_shops\")\n    .then(r=>r.json())\n    .then(coffeeList=>\n      this.setState({\n        coffeeShops: coffeeList})\n      )\n    }\n    \n  \n    addToFavorites =(coffeeShop)=>{\n    debugger\n    let userObject = this.state.currentUser\n    fetch(`http://localhost:4000/favorites`, {\n        method: 'POST',\n        headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({user_id: userObject.id, coffee_shop_id: coffeeShop.id}),\n    }).then(r=>r.json())\n      .catch(error => console.error('Error:', error))\n      .then(r=> console.log(r)\n      )\n      alert(\"Added to favorites\")\n\n    // if(this.state.currentUser === null){\n    //   alert(\"please login\")\n    // }\n    // else if(this.state.favorites.includes(shop)){\n    //   alert(\"You already added this shop to your favorites\")\n    // }else{\n    //   let newShop = [...this.state.favorites, shop]\n    //   this.setState({favorites : newShop})\n    // }\n  }\n\n  removeFromFavorites =(shop)=>{\n    if(!this.state.favorites.includes(shop)){\n      alert(\"This shop is not in your favorites\")\n    }else{\n    let newArray = this.state.favorites.filter(s=> s !== shop)\n    this.setState({favorites : newArray})}\n  }\n\n  \n  loginSubmit = (user) =>{\n    this.setState({\n      loggingIn: true,\n      currentUser: user.user\n    })\n  }\n\n  onSearch = (event) => {\n    this.setState({searchText: event.target.value})\n    \n  }\n\nhandleSort = (value) => {\n    value === \"Price\"\n    ?\n    this.setState({sort: \"price\"})\n    :\n    this.setState({sort: \"rating\"})\n  }\n  getSorted(){\n    \n    let value = this.state.sort\n    return(\n    value === \"price\"\n    ?\n    (this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? 1 : -1))\n    :\n    (this.state.displayedShops.sort((shop1, shop2) => shop1[value] > shop2[value] ? -1 : 1)))\n  }\n  \n  resetList = () =>{\n    let allShops = this.state.coffeeShops\n    this.setState({\n      selectedShop: null,\n      displayedShops: allShops,\n      searchText: \"\"\n      })\n  }\n  selectShop = (shop) =>{\n    this.setState({selectedShop: shop})\n  }\n\n  goToProfile = () =>{\n    \n    let favorites = this.state.favorites\n    this.state.currentUser\n    ?\n    this.setState({\n      displayedShops: favorites,\n      onProfilePage: true})\n    :\n    alert(\"please login\")\n  }\n\n  render(){\n\n    let sortedShops = this.getSorted(this.state.sort)\n    let searchedShops = sortedShops.filter(s => s.name.toLowerCase().includes(this.state.searchText.toLowerCase()))\n  return (\n    <div className=\"App\">\n      <TitleBar  />\n   \n    {this.state.currentUser && this.state.displayedShops.length > 0 ? <NavBar user={this.state.currentUser} loginClick={this.loginClick} onSearch={this.onSearch}/>: null}\n    {this.state.currentUser && this.state.displayedShops.length > 0  ? <SortControl sort={this.state.sort} getSorted={this.getSorted} handleSort={this.handleSort}/>: null}<br/>\n            \n     <Switch>\n            <Route path=\"/coffeeshops/:id\" render={(props) => {\n              let id = parseInt(props.match.params.id)\n              let selectedShop = this.state.coffeeShops.find(s=>s.id === id)\n              return <CoffeeCard\n              shop={selectedShop} addToFavorites={this.addToFavorites} favorites={this.state.favorites} goBack={this.resetList} removeFromFavorites={this.removeFromFavorites}/>\n            }} />\n            <Route exact path=\"/coffeeshops\" render={()=>\n              <CoffeeList coffee_shops={searchedShops} selectShop={this.selectShop} goToProfile={this.goToProfile}/>\n            }/>\n            <Route exact path=\"/\" render={() => <Redirect to=\"/login\" />} />\n            <Route exact path=\"/profile\" render={() => {\n              return this.state.currentUser ? <UserProfile user={this.state.currentUser} display = {searchedShops} goBack={this.resetList} selectShop={this.selectShop} getSorted={this.getSorted}/> :\n                <Redirect to=\"/login\"/>\n            }} />\n            <Route exact path=\"/login\" render={() => {\n              return this.state.currentUser ? <Redirect to=\"/profile\"/> : <LoginForm\n                loginSubmit={this.loginSubmit}\n              />\n            }} />\n          </Switch>\n\n    \n    </div>\n  \n  )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}